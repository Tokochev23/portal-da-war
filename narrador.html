<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>WAR ‚Ä¢ Painel do Narrador</title>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 16 16%22%3E%3Crect width=%2216%22 height=%2216%22 rx=%223%22 fill=%22%23ffb400%22/%3E%3Ctext x=%228%22 y=%2211%22 font-size=%2210%22 text-anchor=%22middle%22 fill=%22%230b1020%22%3EN%3C/text%3E%3C/svg%3E" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = { theme: { extend: { colors: { bg: { DEFAULT: "#0b1020", soft: "#10172a", ring: "#1e293b" }, brand: { 500: "#ffb400" } } } } }
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    :root { color-scheme: dark; }
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", sans-serif; background: #0b1020; color: #e2e8f0; }
  </style>
</head>
<body class="bg-bg text-slate-200">
  <header class="border-b border-bg-ring/70 sticky top-0 z-40 bg-bg/90 backdrop-blur">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
      <div class="flex items-center gap-3">
        <div class="h-9 w-9 rounded-xl bg-brand-500/15 ring-1 ring-brand-500/30 grid place-items-center">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-brand-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 3l8 4.5v9L12 21l-8-4.5v-9L12 3zM12 3v18M4 7.5l8 4.5m8-4.5l-8 4.5" />
          </svg>
        </div>
        <div>
          <div class="text-sm text-slate-300/80">WAR ‚Ä¢ Painel do Narrador</div>
          <div class="font-extrabold tracking-tight">Administra√ß√£o</div>
        </div>
      </div>
      <nav class="hidden md:flex items-center gap-6 text-sm">
        <a href="index.html" class="hover:text-white/90 transition">In√≠cio</a>
        <a href="#" id="logout-link" class="hover:text-white/90 transition">Sair</a>
      </nav>
    </div>
  </header>

  <main class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 py-8">
    <div id="gate" class="hidden rounded-xl border border-red-500/30 bg-red-500/10 p-4 text-red-300">
      Acesso negado. Esta p√°gina √© exclusiva para narradores.
    </div>

    <div id="admin-root" class="hidden grid grid-cols-1 lg:grid-cols-[220px_1fr] gap-6">
      <aside class="space-y-4">
        <div class="rounded-xl border border-bg-ring/70 p-4 bg-bg-soft">
          <div class="text-xs text-slate-400">Turno atual</div>
          <div id="turno-atual-admin" class="text-xl font-extrabold text-emerald-400">#‚Äì</div>
          <div class="mt-3 grid grid-cols-1 gap-2">
            <button id="btn-recarregar" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5">Recarregar</button>
            <div>
              <label class="text-xs text-slate-400">Alterar turno</label>
              <div class="mt-1 flex gap-2">
                <input id="turno-input" type="number" min="0" class="w-24 rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="#" />
                <button id="btn-salvar-turno" class="rounded-lg bg-brand-500/90 text-slate-950 font-semibold px-3 py-1.5 hover:bg-brand-400">Salvar</button>
              </div>
            </div>
          </div>
        </div>
        <div class="rounded-xl border border-bg-ring/70 p-3 bg-bg-soft">
          <div class="text-sm font-semibold mb-2">Se√ß√µes</div>
          <div id="menu-secoes" class="space-y-1"></div>
        </div>
        <div class="rounded-xl border border-bg-ring/70 p-3 bg-bg-soft">
          <div class="text-sm font-semibold mb-2">Cat√°logo de Campos</div>
          <div class="space-y-2">
            <button id="btn-salvar-catalogo" class="w-full rounded-lg bg-brand-500/90 text-slate-950 font-semibold px-3 py-1.5 hover:bg-brand-400">Salvar cat√°logo</button>
            <button id="btn-carregar-catalogo" class="w-full rounded-lg border border-bg-ring/70 px-3 py-1.5 hover:border-slate-500/60 hover:bg-white/5">Carregar do servidor</button>
          </div>
        </div>
      </aside>

      <section class="space-y-4">
        <!-- Controles de Tempo Real -->
        <div class="rounded-xl border border-brand-500/30 bg-gradient-to-r from-brand-500/5 to-brand-600/5 p-4">
          <div class="flex items-center justify-between mb-3">
            <div>
              <h3 class="text-sm font-semibold text-brand-200">üöÄ Sistema de Tempo Real</h3>
              <p class="text-xs text-slate-400 mt-1">Mudan√ßas s√£o aplicadas instantaneamente com hist√≥rico completo</p>
            </div>
            <div class="flex items-center gap-3">
              <label class="flex items-center gap-2 text-sm">
                <input id="realtime-toggle" type="checkbox" checked class="rounded border-bg-ring/70 bg-bg text-brand-500 focus:ring-brand-500/50">
                <span class="text-slate-300">Tempo Real</span>
              </label>
              <label class="flex items-center gap-2 text-sm">
                <input id="autosave-toggle" type="checkbox" checked class="rounded border-bg-ring/70 bg-bg text-emerald-500 focus:ring-emerald-500/50">
                <span class="text-slate-300">Auto Save</span>
              </label>
            </div>
          </div>
        </div>
        
        <!-- Sele√ß√£o de Pa√≠s e Se√ß√£o -->
        <div class="rounded-xl border border-bg-ring/70 p-4 bg-bg-soft">
          <div class="flex flex-col sm:flex-row sm:items-center gap-3">
            <div class="flex-1">
              <label class="text-xs text-slate-400">Pa√≠s</label>
              <select id="select-pais" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm focus:border-brand-500/50 focus:ring-1 focus:ring-brand-500/50"></select>
            </div>
            <div class="flex-none w-full sm:w-auto">
              <label class="text-xs text-slate-400">Se√ß√£o</label>
              <select id="select-secao" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm focus:border-brand-500/50 focus:ring-1 focus:ring-brand-500/50"></select>
            </div>
            <div class="flex-none sm:self-end">
              <button id="btn-salvar-secao" class="mt-6 sm:mt-0 rounded-lg bg-emerald-500 text-slate-950 font-semibold px-4 py-2 hover:bg-emerald-400 transition-colors">Salvar</button>
            </div>
          </div>
        </div>

        <!-- Formul√°rio de Edi√ß√£o -->
        <div class="rounded-xl border border-bg-ring/70 p-4 bg-bg-soft">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-sm font-semibold text-slate-200">Edi√ß√£o de Dados</h3>
            <div class="flex items-center gap-2 text-xs">
              <div class="w-2 h-2 bg-emerald-400 rounded-full"></div>
              <span class="text-slate-400">Mudan√ßa aplicada</span>
              <div class="w-2 h-2 bg-blue-400 rounded-full ml-2"></div>
              <span class="text-slate-400">Mudan√ßa externa</span>
            </div>
          </div>
          <div id="form-secao" class="grid grid-cols-1 md:grid-cols-2 gap-4"></div>
        </div>
        
        <!-- Hist√≥rico de Mudan√ßas -->
        <div class="rounded-xl border border-bg-ring/70 p-4 bg-bg-soft">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-sm font-semibold text-slate-200">üìú Hist√≥rico de Mudan√ßas</h3>
            <div class="flex gap-2">
              <button id="history-refresh" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-xs hover:border-slate-500/60 hover:bg-white/5 transition-colors">
                üîÑ Atualizar
              </button>
              <button id="export-history" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-xs hover:border-slate-500/60 hover:bg-white/5 transition-colors">
                üìÅ Exportar
              </button>
            </div>
          </div>
          <div class="text-xs text-slate-400 mb-3">
            Mostrando as √∫ltimas 20 mudan√ßas para o pa√≠s selecionado. Use ‚Ü∂ para reverter mudan√ßas.
          </div>
          <div id="history-list" class="space-y-2 max-h-64 overflow-y-auto">
            <div class="text-sm text-slate-500 text-center py-4">
              Selecione um pa√≠s para ver o hist√≥rico
            </div>
          </div>
        </div>

        <div class="rounded-xl border border-bg-ring/70 p-4 bg-bg-soft">
          <div class="flex items-center justify-between mb-3">
            <div class="text-sm font-semibold">Adicionar campo na se√ß√£o atual</div>
            <button id="btn-adicionar-campo" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5">+ Campo</button>
          </div>
          <div id="lista-campos-secao" class="text-sm text-slate-400">Nenhum campo adicionado.</div>
        </div>

        <!-- Ferramentas Avan√ßadas de Gerenciamento -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-purple-900/20 to-purple-950/30">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold">üîç Ferramentas Avan√ßadas</h2>
            <div class="flex gap-2">
              <button id="country-comparison" class="rounded-lg border border-purple-500/50 text-purple-200 px-3 py-1.5 text-sm hover:bg-purple-500/10 transition-colors">
                üåê Comparar Pa√≠ses
              </button>
              <button id="bulk-operations" class="rounded-lg border border-purple-500/50 text-purple-200 px-3 py-1.5 text-sm hover:bg-purple-500/10 transition-colors">
                üìã Opera√ß√µes em Lote
              </button>
              <button id="analytics-dashboard" class="rounded-lg border border-purple-500/50 text-purple-200 px-3 py-1.5 text-sm hover:bg-purple-500/10 transition-colors">
                üìà Analytics
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div class="bg-bg/30 rounded-lg p-3 border border-purple-500/20">
              <div class="text-sm font-medium text-purple-200 mb-2">üìä Estat√≠sticas Gerais</div>
              <div class="space-y-1 text-xs text-slate-400">
                <div class="flex justify-between">
                  <span>Total de pa√≠ses:</span>
                  <span id="stats-total-countries">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Com jogadores:</span>
                  <span id="stats-with-players">-</span>
                </div>
                <div class="flex justify-between">
                  <span>PIB total global:</span>
                  <span id="stats-global-gdp">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Estab. m√©dia:</span>
                  <span id="stats-avg-stability">-</span>
                </div>
              </div>
            </div>
            
            <div class="bg-bg/30 rounded-lg p-3 border border-purple-500/20">
              <div class="text-sm font-medium text-purple-200 mb-2">‚ö° Atividade Recente</div>
              <div class="space-y-1 text-xs text-slate-400">
                <div class="flex justify-between">
                  <span>Mudan√ßas hoje:</span>
                  <span id="stats-changes-today">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Rollbacks hoje:</span>
                  <span id="stats-rollbacks-today">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Pa√≠s mais ativo:</span>
                  <span id="stats-most-active">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Usu√°rio mais ativo:</span>
                  <span id="stats-most-active-user">-</span>
                </div>
              </div>
            </div>
            
            <div class="bg-bg/30 rounded-lg p-3 border border-purple-500/20">
              <div class="text-sm font-medium text-purple-200 mb-2">üéñÔ∏è Rankings</div>
              <div class="space-y-1 text-xs text-slate-400">
                <div class="flex justify-between">
                  <span>Maior PIB:</span>
                  <span id="stats-highest-gdp">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Maior popula√ß√£o:</span>
                  <span id="stats-highest-pop">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Mais est√°vel:</span>
                  <span id="stats-most-stable">-</span>
                </div>
                <div class="flex justify-between">
                  <span>Mais tecnol√≥gico:</span>
                  <span id="stats-most-tech">-</span>
                </div>
              </div>
            </div>
          </div>
          
          <div class="mt-4">
            <button id="refresh-stats" class="rounded-lg border border-purple-500/50 text-purple-200 px-4 py-2 text-sm hover:bg-purple-500/10 transition-colors">
              üîÑ Atualizar Estat√≠sticas
            </button>
          </div>
        </div>

        <!-- Gerenciamento de Jogadores -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-blue-900/20 to-blue-950/30">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold">üë• Gerenciamento de Jogadores</h2>
            <div class="flex gap-2">
              <button id="player-analytics" class="rounded-lg border border-blue-500/50 text-blue-200 px-3 py-1.5 text-sm hover:bg-blue-500/10 transition-colors">
                üìà Analytics
              </button>
              <button id="bulk-assignments" class="rounded-lg border border-blue-500/50 text-blue-200 px-3 py-1.5 text-sm hover:bg-blue-500/10 transition-colors">
                üîÑ Atribui√ß√µes
              </button>
              <button id="send-announcement" class="rounded-lg border border-blue-500/50 text-blue-200 px-3 py-1.5 text-sm hover:bg-blue-500/10 transition-colors">
                üì¢ An√∫ncio
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Lista de Jogadores -->
            <div>
              <div class="flex items-center justify-between mb-3">
                <h3 class="text-sm font-semibold text-blue-200">Jogadores Ativos</h3>
                <div class="text-xs text-slate-400" id="player-count">0 jogadores</div>
              </div>
              <div class="bg-bg/30 rounded-lg p-3 border border-blue-500/20 max-h-64 overflow-y-auto">
                <div id="players-list" class="space-y-2">
                  <div class="text-sm text-slate-500 text-center py-4">
                    Carregando jogadores...
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Pa√≠ses sem Jogadores -->
            <div>
              <div class="flex items-center justify-between mb-3">
                <h3 class="text-sm font-semibold text-blue-200">Pa√≠ses Dispon√≠veis</h3>
                <div class="text-xs text-slate-400" id="available-count">0 pa√≠ses</div>
              </div>
              <div class="bg-bg/30 rounded-lg p-3 border border-blue-500/20 max-h-64 overflow-y-auto">
                <div id="available-countries" class="space-y-2">
                  <div class="text-sm text-slate-500 text-center py-4">
                    Carregando pa√≠ses...
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- A√ß√µes R√°pidas -->
          <div class="mt-4 flex flex-wrap gap-2">
            <button id="refresh-players" class="rounded-lg border border-blue-500/50 text-blue-200 px-3 py-1.5 text-sm hover:bg-blue-500/10 transition-colors">
              üîÑ Atualizar
            </button>
            <button id="assign-random" class="rounded-lg border border-blue-500/50 text-blue-200 px-3 py-1.5 text-sm hover:bg-blue-500/10 transition-colors">
              üé≤ Atribui√ß√£o Aleat√≥ria
            </button>
            <button id="clear-all-assignments" class="rounded-lg border border-red-500/50 text-red-200 px-3 py-1.5 text-sm hover:bg-red-500/10 transition-colors">
              üöÆ Limpar Todas
            </button>
          </div>
        </div>
        
        <!-- Simulador de Eventos e Cen√°rios -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-orange-900/20 to-orange-950/30">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold">üé≤ Simulador de Eventos</h2>
            <div class="flex gap-2">
              <button id="create-event" class="rounded-lg border border-orange-500/50 text-orange-200 px-3 py-1.5 text-sm hover:bg-orange-500/10 transition-colors">
                ‚ú® Criar Evento
              </button>
              <button id="scenario-templates" class="rounded-lg border border-orange-500/50 text-orange-200 px-3 py-1.5 text-sm hover:bg-orange-500/10 transition-colors">
                üìú Templates
              </button>
              <button id="event-history" class="rounded-lg border border-orange-500/50 text-orange-200 px-3 py-1.5 text-sm hover:bg-orange-500/10 transition-colors">
                üìä Hist√≥rico
              </button>
            </div>
          </div>
          
          <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <!-- Gerador de Eventos Aleat√≥rios -->
            <div>
              <h3 class="text-sm font-semibold text-orange-200 mb-3">üé∞ Eventos Aleat√≥rios</h3>
              <div class="bg-bg/30 rounded-lg p-3 border border-orange-500/20">
                <div class="space-y-3">
                  <div>
                    <label class="text-xs text-slate-400 mb-1 block">Tipo de Evento:</label>
                    <select id="event-type" class="w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm">
                      <option value="economic">Econ√¥mico</option>
                      <option value="political">Pol√≠tico</option>
                      <option value="military">Militar</option>
                      <option value="natural">Desastre Natural</option>
                      <option value="technological">Tecnol√≥gico</option>
                      <option value="diplomatic">Diplom√°tico</option>
                    </select>
                  </div>
                  
                  <div>
                    <label class="text-xs text-slate-400 mb-1 block">Intensidade:</label>
                    <div class="flex items-center gap-2">
                      <input id="event-intensity" type="range" min="1" max="10" value="5" class="flex-1">
                      <span id="intensity-value" class="text-sm text-slate-300 w-8">5</span>
                    </div>
                  </div>
                  
                  <div>
                    <label class="text-xs text-slate-400 mb-1 block">Alcance:</label>
                    <select id="event-scope" class="w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm">
                      <option value="global">Global</option>
                      <option value="regional">Regional</option>
                      <option value="single">Pa√≠s √önico</option>
                      <option value="custom">Personalizado</option>
                    </select>
                  </div>
                  
                  <button id="generate-event" class="w-full rounded-lg bg-orange-500 text-slate-950 font-semibold px-4 py-2 hover:bg-orange-400 transition-colors">
                    üé≤ Gerar Evento
                  </button>
                </div>
              </div>
            </div>
            
            <!-- Cen√°rios Pr√©-definidos -->
            <div>
              <h3 class="text-sm font-semibold text-orange-200 mb-3">üåç Cen√°rios</h3>
              <div class="bg-bg/30 rounded-lg p-3 border border-orange-500/20">
                <div class="space-y-2 max-h-48 overflow-y-auto">
                  <button class="w-full text-left p-2 rounded-lg border border-bg-ring/30 hover:bg-white/5 transition-colors">
                    <div class="text-sm font-medium text-orange-200">Crise do Petr√≥leo</div>
                    <div class="text-xs text-slate-400">Reduz PIB global em 15-25%</div>
                  </button>
                  
                  <button class="w-full text-left p-2 rounded-lg border border-bg-ring/30 hover:bg-white/5 transition-colors">
                    <div class="text-sm font-medium text-orange-200">Revolu√ß√£o Tecnol√≥gica</div>
                    <div class="text-xs text-slate-400">+10 Tecnologia para pa√≠ses desenvolvidos</div>
                  </button>
                  
                  <button class="w-full text-left p-2 rounded-lg border border-bg-ring/30 hover:bg-white/5 transition-colors">
                    <div class="text-sm font-medium text-orange-200">Guerra Fria Intensifica</div>
                    <div class="text-xs text-slate-400">Reduz estabilidade global, aumenta gastos militares</div>
                  </button>
                  
                  <button class="w-full text-left p-2 rounded-lg border border-bg-ring/30 hover:bg-white/5 transition-colors">
                    <div class="text-sm font-medium text-orange-200">Boom Econ√¥mico</div>
                    <div class="text-xs text-slate-400">PIB +20% para alguns pa√≠ses sorteados</div>
                  </button>
                  
                  <button class="w-full text-left p-2 rounded-lg border border-bg-ring/30 hover:bg-white/5 transition-colors">
                    <div class="text-sm font-medium text-orange-200">Pandemia Global</div>
                    <div class="text-xs text-slate-400">Reduz PIB e estabilidade globalmente</div>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Simulador Econ√¥mico -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-slate-900/60 to-slate-950/70">
          <h2 class="text-lg font-semibold mb-4">Simulador Econ√¥mico</h2>
          <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <div>
              <label class="text-xs text-slate-400">Investidor</label>
              <select id="eco-investidor" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm"></select>
            </div>
            <div>
              <label class="text-xs text-slate-400">Tipo</label>
              <div class="mt-1 flex gap-4 text-sm">
                <label class="inline-flex items-center gap-2"><input type="radio" name="eco-tipo" value="interno" checked>Interno</label>
                <label class="inline-flex items-center gap-2"><input type="radio" name="eco-tipo" value="externo">Externo (parceria)</label>
              </div>
            </div>
            <div>
              <label class="text-xs text-slate-400">Parceiro (se externo)</label>
              <select id="eco-parceiro" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" disabled></select>
            </div>
            <div>
              <label class="text-xs text-slate-400">Investimento (US$)</label>
              <input id="eco-investimento" type="number" min="0" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="1000000" />
            </div>
            <div>
              <label class="text-xs text-slate-400">D12</label>
              <div class="mt-1 flex gap-2">
                <input id="eco-d12" type="number" min="1" max="12" class="w-24 rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="-" />
                <button id="eco-roll" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5">Rolar D12</button>
              </div>
            </div>
            <div>
              <label class="text-xs text-slate-400">B√¥nus/Penalidade do narrador</label>
              <div class="mt-1 flex items-center gap-3">
                <input id="eco-bonus" type="range" min="-3" max="3" step="0.5" class="flex-1" />
                <span id="eco-bonus-label" class="w-14 text-sm text-slate-300 text-right">0%</span>
              </div>
            </div>
            <div class="md:col-span-2">
              <label class="text-xs text-slate-400">Observa√ß√µes</label>
              <input id="eco-notas" type="text" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="Justificativa do b√¥nus/penalidade, contexto, etc." />
            </div>
          </div>
          <div class="mt-4 grid grid-cols-1 lg:grid-cols-3 gap-4 text-sm">
            <div class="rounded-xl border border-white/10 p-3">
              <div class="text-slate-400">Efici√™ncia do pa√≠s</div>
              <div class="mt-1" id="eco-eff"></div>
            </div>
            <div class="rounded-xl border border-white/10 p-3">
              <div class="text-slate-400">Fator do dado</div>
              <div class="mt-1" id="eco-fdado"></div>
            </div>
            <div class="rounded-xl border border-white/10 p-3">
              <div class="text-slate-400">Crescimento previsto</div>
              <div class="mt-1" id="eco-preview"></div>
            </div>
          </div>
          <div class="mt-4 flex gap-3">
            <button id="eco-aplicar" class="rounded-lg bg-emerald-500 text-slate-950 font-semibold px-4 py-2 hover:bg-emerald-400">Aplicar</button>
            <button id="eco-simulate" class="rounded-lg border border-emerald-500/50 text-emerald-200 px-4 py-2 hover:bg-emerald-500/10 transition-colors">Simular Resultado</button>
            <button id="eco-template" class="rounded-lg border border-emerald-500/50 text-emerald-200 px-4 py-2 hover:bg-emerald-500/10 transition-colors">Salvar Template</button>
          </div>
        </div>

        <!-- A√ß√µes do turno (log) -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-slate-900/60 to-slate-950/70">
          <div class="flex items-center justify-between mb-3">
            <h2 class="text-lg font-semibold">A√ß√µes do turno (investidor selecionado)</h2>
            <button id="log-recarregar" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5">Recarregar</button>
          </div>
          <div class="text-sm text-slate-400 mb-2">Mostrando somente a√ß√µes econ√¥micas do turno atual para o investidor escolhido acima.</div>
          <div id="lista-acoes" class="space-y-2 text-sm"></div>
        </div>

        <!-- Deltas em Massa com Tempo Real -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-slate-900/60 to-slate-950/70">
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-lg font-semibold">‚ö° Aplicar Deltas em Massa</h2>
            <div class="flex items-center gap-2 text-sm">
              <div class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></div>
              <span class="text-slate-400">Tempo Real Ativado</span>
            </div>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
            <div>
              <label class="text-xs text-slate-400">PIB (% relativo)</label>
              <input id="delta-pib" type="number" step="0.1" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm focus:border-brand-500/50 focus:ring-1 focus:ring-brand-500/50" placeholder="ex.: 2 para +2%" />
              <div class="text-xs text-slate-500 mt-1">Aplicado multiplicativamente</div>
            </div>
            <div>
              <label class="text-xs text-slate-400">Tecnologia (+pontos)</label>
              <input id="delta-tec" type="number" step="1" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm focus:border-brand-500/50 focus:ring-1 focus:ring-brand-500/50" placeholder="ex.: 1" />
              <div class="text-xs text-slate-500 mt-1">Limitado a 0-100</div>
            </div>
            <div>
              <label class="text-xs text-slate-400">Estabilidade (+pontos)</label>
              <input id="delta-est" type="number" step="1" class="mt-1 w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm focus:border-brand-500/50 focus:ring-1 focus:ring-brand-500/50" placeholder="ex.: -1" />
              <div class="text-xs text-slate-500 mt-1">Limitado a 0-100</div>
            </div>
          </div>
          
          <div class="mt-4">
            <div class="flex items-center justify-between mb-2">
              <div class="text-xs text-slate-400">Selecione os pa√≠ses</div>
              <div class="text-xs text-slate-500" id="selected-count">0 pa√≠ses selecionados</div>
            </div>
            <div id="delta-paises" class="max-h-60 overflow-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-2 p-2 border border-bg-ring/30 rounded-lg bg-bg/30"></div>
          </div>
          
          <div class="mt-4">
            <label class="text-xs text-slate-400 mb-2 block">Motivo da altera√ß√£o (opcional)</label>
            <input id="delta-reason" type="text" class="w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="Ex.: Ajuste econ√¥mico do turno, evento global, etc." />
          </div>
          
          <div class="mt-4 flex gap-2">
            <button id="delta-selecionar-todos" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5 transition-colors">Selecionar todos</button>
            <button id="delta-limpar" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5 transition-colors">Limpar</button>
            <button id="delta-preview" class="rounded-lg border border-brand-500/50 text-brand-200 px-3 py-1.5 text-sm hover:bg-brand-500/10 transition-colors">üëÅÔ∏è Pr√©via</button>
            <button id="delta-aplicar" class="ml-auto rounded-lg bg-emerald-500 text-slate-950 font-semibold px-4 py-2 hover:bg-emerald-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">‚ö° Aplicar em Tempo Real</button>
          </div>
        </div>

        <!-- Importar CSV por se√ß√£o -->
        <div class="rounded-2xl border border-bg-ring/70 p-5 bg-gradient-to-b from-slate-900/60 to-slate-950/70">
          <h2 class="text-lg font-semibold mb-4">Importar CSV (se√ß√£o atual)</h2>
          <div class="text-sm text-slate-400 mb-2">Cole o CSV com a coluna "Pais" e colunas que correspondam √†s chaves/labels desta se√ß√£o.</div>
          <textarea id="csv-input" rows="6" class="w-full rounded-lg bg-bg border border-bg-ring/70 p-2 text-sm" placeholder="Pais,Campo1,Campo2\nBrasil,10,20"></textarea>
          <div class="mt-3 flex gap-2">
            <button id="csv-preview" class="rounded-lg border border-bg-ring/70 px-3 py-1.5 text-sm hover:border-slate-500/60 hover:bg-white/5">Pr√©-visualizar</button>
            <button id="csv-aplicar" class="rounded-lg bg-emerald-500 text-slate-950 font-semibold px-4 py-2 hover:bg-emerald-400">Aplicar importa√ß√£o</button>
          </div>
          <div id="csv-preview-area" class="mt-3 text-sm"></div>
        </div>
      </section>
    </div>
  </main>

  <script src="./js/services/firebase.js" type="module"></script>
  <script src="./js/services/changeHistory.js" type="module"></script>
  <script src="./js/services/realTimeUpdates.js" type="module"></script>
  <script src="./js/services/playerManager.js" type="module"></script>
  <script src="./js/services/eventSimulator.js" type="module"></script>
  <script src="./js/components/advancedTools.js" type="module"></script>
  <script src="./js/pages/narrador.js" type="module"></script>
  
  <!-- Modal Templates -->
  <div id="comparison-modal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-bg-soft border border-bg-ring/70 rounded-2xl p-6 max-w-6xl w-full max-h-96 overflow-y-auto">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-slate-200">üåê Compara√ß√£o de Pa√≠ses</h3>
        <button id="close-comparison" class="text-slate-400 hover:text-slate-200">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <div class="mb-4">
        <label class="text-sm text-slate-400 mb-2 block">Selecionar pa√≠ses para comparar:</label>
        <div id="comparison-countries" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2 max-h-40 overflow-y-auto p-2 border border-bg-ring/30 rounded-lg bg-bg/30"></div>
      </div>
      
      <div id="comparison-results" class="space-y-4"></div>
      
      <div class="mt-6 flex gap-3 justify-end">
        <button id="export-comparison" class="px-4 py-2 rounded-lg border border-bg-ring/70 text-slate-300 hover:bg-white/5">
          üìÅ Exportar
        </button>
        <button id="close-comparison-btn" class="px-4 py-2 rounded-lg bg-slate-600 text-slate-200 hover:bg-slate-500">
          Fechar
        </button>
      </div>
    </div>
  </div>
  
  <div id="bulk-operations-modal" class="hidden fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4">
    <div class="bg-bg-soft border border-bg-ring/70 rounded-2xl p-6 max-w-4xl w-full max-h-96 overflow-y-auto">
      <div class="flex items-center justify-between mb-4">
        <h3 class="text-lg font-semibold text-slate-200">üìã Opera√ß√µes em Lote</h3>
        <button id="close-bulk" class="text-slate-400 hover:text-slate-200">
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
      
      <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
        <div>
          <h4 class="text-sm font-medium text-slate-300 mb-3">Opera√ß√µes R√°pidas</h4>
          <div class="space-y-2">
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Resetar Estabilidade</div>
              <div class="text-xs text-slate-400">Definir estabilidade de todos para 50%</div>
            </button>
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Normalizar Tecnologia</div>
              <div class="text-xs text-slate-400">Definir tecnologia base para todos</div>
            </button>
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Limpar Arsenal Nuclear</div>
              <div class="text-xs text-slate-400">Remover todas as bombas nucleares</div>
            </button>
          </div>
        </div>
        
        <div>
          <h4 class="text-sm font-medium text-slate-300 mb-3">Templates de Configura√ß√£o</h4>
          <div class="space-y-2">
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Pa√≠s Desenvolvido</div>
              <div class="text-xs text-slate-400">PIB alto, tecnologia avan√ßada, estabilidade</div>
            </button>
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Pa√≠s em Desenvolvimento</div>
              <div class="text-xs text-slate-400">PIB m√©dio, tecnologia em crescimento</div>
            </button>
            <button class="w-full text-left p-3 rounded-lg border border-bg-ring/50 hover:bg-white/5 transition-colors">
              <div class="font-medium text-sm">Pa√≠s em Crise</div>
              <div class="text-xs text-slate-400">Baixa estabilidade, economia comprometida</div>
            </button>
          </div>
        </div>
      </div>
      
      <div class="mt-6 flex gap-3 justify-end">
        <button id="close-bulk-btn" class="px-4 py-2 rounded-lg bg-slate-600 text-slate-200 hover:bg-slate-500">
          Fechar
        </button>
      </div>
    </div>
  </div>
</body>
</html>
