import{L as P,n as O,d as E,k as f}from"./firebase-DhEDpEFS.js";import"./preload-helper-f85Crcwt.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js";import"https://www.gstatic.com/firebasejs/10.12.2/firebase-storage-compat.js";const p={BASE_PRODUCTION_PER_MILLION:{Graos:200,Combustivel:20,Metais:15,Carvao:25,Energia:80},DEVELOPMENT_MULTIPLIERS:{ultraDeveloped:{threshold:2e3,multiplier:3},highlyDeveloped:{threshold:1200,multiplier:2.5},developed:{threshold:800,multiplier:2},moderate:{threshold:500,multiplier:1.5},developing:{threshold:200,multiplier:1},underdeveloped:{multiplier:.6}},URBANIZATION_MODIFIERS:{Combustivel:.015,Metais:.012,Energia:.02,Graos:-.012},GRAIN_PRODUCTION_FACTORS:{RURAL_PRODUCTIVITY_BASE:250,TECHNOLOGY_EFFICIENCY:.025,DEVELOPMENT_BONUS:.001},TECHNOLOGY_MULTIPLIERS:{Graos:.015,Combustivel:.02,Metais:.018,Carvao:.012,Energia:.025},GEOGRAPHIC_MODIFIERS:{oil_rich:{countries:["Venezuela","Ar√°bia Saudita","Kuwait","Iraque","Estados Unidos","URSS","Ir√£"],modifier:{Combustivel:2.5}},coal_rich:{countries:["Estados Unidos","Reino Unido","Alemanha","URSS","China","Pol√¥nia"],modifier:{Carvao:2}},mineral_rich:{countries:["Estados Unidos","URSS","Canad√°","Austr√°lia","Brasil","√Åfrica do Sul"],modifier:{Metais:1.8}},agricultural:{countries:["Estados Unidos","URSS","Argentina","Brasil","Canad√°","Austr√°lia","Fran√ßa","Ucr√¢nia"],modifier:{Graos:1.8}},super_agricultural:{countries:["URSS","Estados Unidos"],modifier:{Graos:2.2}},industrialized:{countries:["Estados Unidos","Reino Unido","Alemanha","Fran√ßa","URSS","Jap√£o"],modifier:{Energia:1.4}}},CLIMATE_PRODUCTION_MODIFIERS:{cold:{Graos:.8,Energia:1.2},temperate:{Graos:1,Energia:1},warm:{Graos:1.1,Energia:.9},hot:{Graos:.7,Energia:.8}}},I={cold:["URSS","Canad√°","Finl√¢ndia","Su√©cia","Noruega","Isl√¢ndia","Dinamarca","Pol√¥nia","Tchecoslov√°quia","Mong√≥lia"],temperate:["Estados Unidos","Reino Unido","Fran√ßa","Alemanha","It√°lia","Espanha","Portugal","Holanda","B√©lgica","Su√≠√ßa","√Åustria","Hungria","Rom√™nia","Bulg√°ria","Iugosl√°via","Coreia do Sul","Coreia do Norte","Jap√£o","China","Argentina","Chile","Uruguai"],warm:["Brasil","M√©xico","Venezuela","Col√¥mbia","Equador","Peru","Bol√≠via","Paraguai","Guatemala","Cuba","√çndia","Paquist√£o","Bangladesh","Birm√¢nia","Tail√¢ndia","Vietn√£","Filipinas","Indon√©sia","Mal√°sia","Turquia","S√≠ria","L√≠bano","Israel","Jord√¢nia","Ir√£","Afeganist√£o","Marrocos","Arg√©lia","Tun√≠sia"],hot:["Ar√°bia Saudita","Kuwait","Iraque","L√≠bia","Egito","Sud√£o","Eti√≥pia","Qu√™nia","Tanz√¢nia","Som√°lia","Chade","Nig√©ria","Mali","N√≠ger","Austr√°lia","Sri Lanka","Emirados √Årabes Unidos"]};class M{static calculateCountryProduction(a){try{const o=parseFloat(a.Populacao)||1,s=parseFloat(a.PIBPerCapita)||500,c=parseFloat(a.Urbanizacao)||30,r=parseFloat(a.Tecnologia)||20,i=a.Pais||a.Nome||"Desconhecido",t=this.calculateBaseProduction(o),e=this.getDevelopmentMultiplier(s),d=this.calculateUrbanizationModifiers(c),n=this.calculateTechnologyModifiers(r),l=this.getGeographicModifiers(i),g=this.getClimateProductionModifiers(i),h={},C=this.calculateGrainProduction(a);return h.Graos=C.production,["Combustivel","Metais","Carvao","Energia"].forEach(m=>{let v=t[m]*e;d[m]&&(v*=d[m]),n[m]&&(v*=n[m]),l[m]&&(v*=l[m]),g[m]&&(v*=g[m]),h[m]=Math.round(v)}),h._metadata={calculatedAt:new Date().toISOString(),countryName:i,population:Math.round(o),pibPerCapita:Math.round(s),developmentLevel:this.getDevelopmentLevel(s),climateZone:this.getClimateZone(i),devMultiplier:e,geographicBonuses:this.getCountryGeographicBonuses(i),grainDetails:C.metadata},h}catch(o){return P.error("Erro ao calcular produ√ß√£o:",o),this.getDefaultProduction()}}static calculateBaseProduction(a){const o=a/1e6,s=p.BASE_PRODUCTION_PER_MILLION;return{Graos:Math.round(s.Graos*o),Combustivel:Math.round(s.Combustivel*o),Metais:Math.round(s.Metais*o),Carvao:Math.round(s.Carvao*o),Energia:Math.round(s.Energia*o)}}static calculateGrainProduction(a){const o=parseFloat(a.Populacao)||1,s=parseFloat(a.Urbanizacao)||30,c=parseFloat(a.Tecnologia)||20,r=parseFloat(a.PIBPerCapita)||500,i=a.Pais||a.Nome||"Desconhecido",t=Math.max(10,100-s),e=o*t/100/1e6,d=p.GRAIN_PRODUCTION_FACTORS;let n=e*d.RURAL_PRODUCTIVITY_BASE;const l=1+d.TECHNOLOGY_EFFICIENCY*c;n*=l;const g=1+d.DEVELOPMENT_BONUS*r;n*=g;const h=this.getGeographicModifiers(i);h.Graos&&(n*=h.Graos);const C=this.getClimateProductionModifiers(i);return C.Graos&&(n*=C.Graos),{production:Math.round(n),metadata:{ruralPopulationPercent:Math.round(t),ruralPopulationMillions:Math.round(e*100)/100,technologyMultiplier:Math.round(l*100)/100,developmentBonus:Math.round(g*100)/100,geographicBonus:h.Graos||1,climateEffect:C.Graos||1}}}static getDevelopmentMultiplier(a){const o=p.DEVELOPMENT_MULTIPLIERS;return a>=o.ultraDeveloped.threshold?o.ultraDeveloped.multiplier:a>=o.highlyDeveloped.threshold?o.highlyDeveloped.multiplier:a>=o.developed.threshold?o.developed.multiplier:a>=o.moderate.threshold?o.moderate.multiplier:a>=o.developing.threshold?o.developing.multiplier:o.underdeveloped.multiplier}static getDevelopmentLevel(a){const o=p.DEVELOPMENT_MULTIPLIERS;return a>=o.ultraDeveloped.threshold?"Ultra Desenvolvido":a>=o.highlyDeveloped.threshold?"Muito Desenvolvido":a>=o.developed.threshold?"Desenvolvido":a>=o.moderate.threshold?"Moderado":a>=o.developing.threshold?"Em Desenvolvimento":"Subdesenvolvido"}static calculateUrbanizationModifiers(a){const o=p.URBANIZATION_MODIFIERS;return{Combustivel:1+o.Combustivel*a,Metais:1+o.Metais*a,Energia:1+o.Energia*a,Graos:1+o.Graos*a}}static calculateTechnologyModifiers(a){const o=p.TECHNOLOGY_MULTIPLIERS;return{Graos:1+o.Graos*a,Combustivel:1+o.Combustivel*a,Metais:1+o.Metais*a,Carvao:1+o.Carvao*a,Energia:1+o.Energia*a}}static getGeographicModifiers(a){const o={Graos:1,Combustivel:1,Metais:1,Carvao:1,Energia:1},s=p.GEOGRAPHIC_MODIFIERS;return["oil_rich","coal_rich","mineral_rich","agricultural","super_agricultural","industrialized"].forEach(r=>{const i=s[r];i&&i.countries.includes(a)&&Object.entries(i.modifier).forEach(([t,e])=>{o[t]=e})}),o}static getCountryGeographicBonuses(a){const o=[],s=p.GEOGRAPHIC_MODIFIERS;return Object.entries(s).forEach(([c,r])=>{if(r.countries.includes(a)){const i={oil_rich:"Rico em Petr√≥leo",coal_rich:"Rico em Carv√£o",mineral_rich:"Rico em Minerais",agricultural:"Agr√≠cola",industrialized:"Industrializado"};o.push(i[c]||c)}}),o}static getClimateProductionModifiers(a){const o=this.getClimateZone(a);return p.CLIMATE_PRODUCTION_MODIFIERS[o]||p.CLIMATE_PRODUCTION_MODIFIERS.temperate}static getClimateZone(a){for(const[o,s]of Object.entries(I))if(s.includes(a))return o;return"temperate"}static getDefaultProduction(){return{Graos:100,Combustivel:50,Metais:30,Carvao:40,Energia:80,_metadata:{calculatedAt:new Date().toISOString(),error:"Valores padr√£o aplicados devido a erro no c√°lculo"}}}static calculateResourceBalance(a){const o=this.calculateCountryProduction(a);return{Graos:o.Graos-(parseFloat(a.ConsumoGraos)||0),Combustivel:o.Combustivel-(parseFloat(a.ConsumoCombustivel)||0),Metais:o.Metais-(parseFloat(a.ConsumoMetais)||0),Carvao:o.Carvao-(parseFloat(a.ConsumoCarvao)||0),Energia:o.Energia-(parseFloat(a.ConsumoEnergia)||0)}}static generateProductionReport(a){const o=this.calculateCountryProduction(a),s=this.calculateResourceBalance(a),c=a.Pais||a.Nome||"Desconhecido",r=[],i=[];return Object.entries(s).forEach(([t,e])=>{e>100&&r.push(t),e<-50&&i.push(t)}),{country:c,production:o,balance:s,summary:{totalProduction:o.Graos+o.Combustivel+o.Metais+o.Carvao,surplusResources:r,deficitResources:i,energyBalance:s.Energia>0?"Super√°vit":"D√©ficit"},analysis:{economicLevel:o._metadata.developmentLevel,geographicBonuses:o._metadata.geographicBonuses,climateZone:o._metadata.climateZone}}}}async function N(){try{if(!await O("Aplicar Produ√ß√£o de Recursos","Esta a√ß√£o ir√° calcular e definir a produ√ß√£o mensal de recursos para todos os pa√≠ses baseado em sua popula√ß√£o, PIB per capita, tecnologia, geografia e clima. Esta opera√ß√£o pode ser executada m√∫ltiplas vezes. Continuar?","Sim, aplicar produ√ß√£o","Cancelar")){E("info","Opera√ß√£o cancelada pelo usu√°rio.");return}E("info","Iniciando c√°lculo de produ√ß√£o de recursos..."),console.log("=== CALCULANDO PRODU√á√ÉO DE RECURSOS ===");const a=await f.collection("paises").get(),o=f.batch(),s=[];let c=0;a.forEach(r=>{const i=r.data(),t=i.Pais||i.Nome||r.id;try{const e=M.calculateCountryProduction(i),d=M.calculateResourceBalance(i),n=M.generateProductionReport(i),l={ProducaoGraos:e.Graos,ProducaoCombustivel:e.Combustivel,ProducaoMetais:e.Metais,ProducaoCarvao:e.Carvao,ProducaoEnergia:e.Energia,ProducaoCalculada:{timestamp:e._metadata.calculatedAt,developmentLevel:e._metadata.developmentLevel,climateZone:e._metadata.climateZone,multiplier:e._metadata.devMultiplier,geographicBonuses:e._metadata.geographicBonuses}};o.update(r.ref,l),c++,s.push({country:t,production:e,balance:d,report:n}),console.log(`${t}:`,{PIB_per_capita:e._metadata.pibPerCapita,desenvolvimento:e._metadata.developmentLevel,clima:e._metadata.climateZone,bonus_geograficos:e._metadata.geographicBonuses,producao:{Graos:e.Graos,Combustivel:e.Combustivel,Metais:e.Metais,Carvao:e.Carvao,Energia:e.Energia},recursos_superavit:n.summary.surplusResources,recursos_deficit:n.summary.deficitResources})}catch(e){console.error(`Erro ao calcular produ√ß√£o para ${t}:`,e)}}),c>0?(await o.commit(),E("success",`Produ√ß√£o calculada para ${c} pa√≠ses!`),R(s),console.log(`‚úÖ Produ√ß√£o aplicada com sucesso para ${c} pa√≠ses`)):E("warning","Nenhum pa√≠s foi processado.")}catch(u){console.error("Erro ao aplicar produ√ß√£o:",u),E("error",`Erro: ${u.message}`)}}function R(u){console.log(`
=== ESTAT√çSTICAS DE PRODU√á√ÉO ===`);const a=u.map(t=>({country:t.country,totalProduction:t.production.Graos+t.production.Combustivel+t.production.Metais+t.production.Carvao+t.production.Energia,production:t.production,developmentLevel:t.production._metadata.developmentLevel})).sort((t,e)=>e.totalProduction-t.totalProduction);console.log(`
üèÜ TOP 10 MAIORES PRODUTORES:`),a.slice(0,10).forEach((t,e)=>{console.log(`${e+1}. ${t.country} - Total: ${t.totalProduction} (${t.developmentLevel})`)});const o={};u.forEach(t=>{const e=t.production._metadata.developmentLevel;o[e]||(o[e]=[]),o[e].push(t)}),console.log(`
üìä PRODU√á√ÉO M√âDIA POR N√çVEL DE DESENVOLVIMENTO:`),Object.entries(o).forEach(([t,e])=>{const d={Graos:Math.round(e.reduce((n,l)=>n+l.production.Graos,0)/e.length),Combustivel:Math.round(e.reduce((n,l)=>n+l.production.Combustivel,0)/e.length),Metais:Math.round(e.reduce((n,l)=>n+l.production.Metais,0)/e.length),Energia:Math.round(e.reduce((n,l)=>n+l.production.Energia,0)/e.length)};console.log(`${t} (${e.length} pa√≠ses):`,d)});const s=u.filter(t=>t.report.summary.surplusResources.length>0);s.length>0&&(console.log(`
‚úÖ PA√çSES COM SUPER√ÅVIT SIGNIFICATIVO (> 100 unidades):`),s.slice(0,15).forEach(t=>{console.log(`${t.country}: ${t.report.summary.surplusResources.join(", ")}`)}));const c=u.filter(t=>t.report.summary.deficitResources.length>0);c.length>0&&(console.log(`
‚ö†Ô∏è PA√çSES COM D√âFICIT (< -50 unidades):`),c.forEach(t=>{console.log(`${t.country}: ${t.report.summary.deficitResources.join(", ")}`)}));const r={};u.forEach(t=>{t.production._metadata.geographicBonuses.forEach(e=>{r[e]||(r[e]=[]),r[e].push(t.country)})}),console.log(`
üåç PA√çSES POR VANTAGEM GEOGR√ÅFICA:`),Object.entries(r).forEach(([t,e])=>{console.log(`${t}: ${e.length} pa√≠ses - ${e.slice(0,5).join(", ")}${e.length>5?"...":""}`)});const i=u.reduce((t,e)=>t+e.balance.Energia,0);console.log(`
‚ö° BALAN√áO ENERG√âTICO GLOBAL: ${i>0?"+":""}${Math.round(i)} MW`)}async function U(u=6){try{console.log(`
=== SIMULA√á√ÉO DE PRODU√á√ÉO - ${u} TURNOS ===`);const a=await f.collection("paises").get(),o=[];a.forEach(r=>{const i=r.data(),t=i.Pais||i.Nome||r.id,e=M.calculateCountryProduction(i),d={Graos:parseFloat(i.ConsumoGraos)||0,Combustivel:parseFloat(i.ConsumoCombustivel)||0,Metais:parseFloat(i.ConsumoMetais)||0,Carvao:parseFloat(i.ConsumoCarvao)||0,Energia:parseFloat(i.ConsumoEnergia)||0},n={country:t,initialStocks:{Graos:parseFloat(i.Graos)||0,Combustivel:parseFloat(i.Combustivel)||0,Metais:parseFloat(i.Metais)||0,Carvao:parseFloat(i.CarvaoSaldo)||0},monthlyBalance:{},afterTurns:{}};Object.keys(n.initialStocks).forEach(l=>{const g=e[l]-d[l];n.monthlyBalance[l]=g,n.afterTurns[l]=Math.max(0,n.initialStocks[l]+g*u)}),o.push(n)});const s=o.filter(r=>Object.values(r.monthlyBalance).some(i=>i>50)),c=o.filter(r=>Object.values(r.monthlyBalance).some(i=>i<-20));console.log(`
üìà PA√çSES EM CRESCIMENTO AP√ìS ${u} TURNOS (balan√ßo > +50):`),s.slice(0,10).forEach(r=>{const i=Object.entries(r.monthlyBalance).filter(([t,e])=>e>50).map(([t,e])=>t);console.log(`${r.country}: ${i.join(", ")}`)}),console.log(`
üìâ PA√çSES EM DECL√çNIO AP√ìS ${u} TURNOS (balan√ßo < -20):`),c.slice(0,10).forEach(r=>{const i=Object.entries(r.monthlyBalance).filter(([t,e])=>e<-20).map(([t,e])=>t);console.log(`${r.country}: ${i.join(", ")}`)}),E("success",`Simula√ß√£o conclu√≠da: ${s.length} pa√≠ses crescendo, ${c.length} em decl√≠nio`)}catch(a){console.error("Erro na simula√ß√£o:",a),E("error","Erro na simula√ß√£o: "+a.message)}}export{N as applyResourceProduction,U as simulateProductionTurns};
