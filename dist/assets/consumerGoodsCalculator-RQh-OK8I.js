import{L}from"./utils-DLoRv3re.js";const r={BASE_PRODUCTION_FACTORS:{ULTRA_DEVELOPED:.6,HIGHLY_DEVELOPED:.45,DEVELOPED:.35,MODERATE:.22,DEVELOPING:.15,UNDERDEVELOPED:.08},MULTIPLIERS:{TECHNOLOGY_EFFICIENCY:.008,URBANIZATION_BONUS:.005,WEALTH_MULTIPLIER:2e-4,STABILITY_EFFECT:.01},POPULATION_DEMAND:{BASE_DEMAND_PER_MILLION:80,URBANIZATION_INCREASE:.018,WEALTH_EXPECTATION:3e-4},STABILITY_EFFECTS:{EXCELLENT:{threshold:85,effect:3},GOOD:{threshold:70,effect:2},ADEQUATE:{threshold:50,effect:0},POOR:{threshold:30,effect:-2},BAD:{threshold:15,effect:-3.5},CRITICAL:{effect:-5}}};class T{static calculateConsumerGoods(t){try{const e=parseFloat(t.Populacao)||1,o=parseFloat(t.PIBPerCapita)||500,i=parseFloat(t.Urbanizacao)||30,n=parseFloat(t.Tecnologia)||20,s=parseFloat(t.Estabilidade)||50,c=t.Pais||t.Nome||"Desconhecido",E=this.calculateProduction(e,o,i,n,s,c),l=this.calculateDemand(e,i,o,c);let a=E/l*100;return a=Math.max(0,Math.min(100,a)),{level:Math.round(a),production:Math.round(E),demand:Math.round(l),metadata:{calculatedAt:new Date().toISOString(),country:t.Pais||t.Nome||"Desconhecido",developmentLevel:this.getDevelopmentLevel(o),stabilityEffect:this.getStabilityEffect(a)}}}catch(e){return L.error("Erro ao calcular bens de consumo:",e),{level:50,production:100,demand:100,metadata:{error:"Valores padrão aplicados devido a erro no cálculo"}}}}static calculateProduction(t,e,o,i,n,s){const c=t/1e6,E=this.getDevelopmentLevel(e),l=this.getBaseProductionRate(E);let a=c*l*100;const u=1+r.MULTIPLIERS.TECHNOLOGY_EFFICIENCY*i;a*=u;const f=1+r.MULTIPLIERS.URBANIZATION_BONUS*o;a*=f;const I=1+r.MULTIPLIERS.WEALTH_MULTIPLIER*e;a*=I;const d=1+r.MULTIPLIERS.STABILITY_EFFECT*(n-50)/100;return a*=d,a}static calculateDemand(t,e,o,i){let s=t/1e6*r.POPULATION_DEMAND.BASE_DEMAND_PER_MILLION;const c=1+r.POPULATION_DEMAND.URBANIZATION_INCREASE*e;s*=c;const E=1+r.POPULATION_DEMAND.WEALTH_EXPECTATION*o;return s*=E,s}static getDevelopmentLevel(t){return t>=2e3?"ULTRA_DEVELOPED":t>=1200?"HIGHLY_DEVELOPED":t>=800?"DEVELOPED":t>=500?"MODERATE":t>=200?"DEVELOPING":"UNDERDEVELOPED"}static getBaseProductionRate(t){return r.BASE_PRODUCTION_FACTORS[t]||.25}static getStabilityEffect(t){const e=r.STABILITY_EFFECTS;return t>=e.EXCELLENT.threshold?e.EXCELLENT.effect:t>=e.GOOD.threshold?e.GOOD.effect:t>=e.ADEQUATE.threshold?e.ADEQUATE.effect:t>=e.POOR.threshold?e.POOR.effect:t>=e.BAD.threshold?e.BAD.effect:e.CRITICAL.effect}static applyStabilityEffect(t){const e=this.calculateConsumerGoods(t),o=e.metadata.stabilityEffect,i=parseFloat(t.Estabilidade)||50,n=Math.max(0,Math.min(100,i+o));return{currentStability:i,stabilityEffect:o,newStability:Math.round(n*100)/100,consumerGoodsLevel:e.level,effectDescription:this.getEffectDescription(o)}}static getEffectDescription(t){return t>=2.5?"População muito satisfeita":t>=1.5?"População satisfeita":t>=-.5?"População neutra":t>=-2.5?"População insatisfeita":t>=-4?"População muito insatisfeita":"População em crise"}static generateConsumerGoodsReport(t){const e=this.calculateConsumerGoods(t),o=this.applyStabilityEffect(t);return{country:t.Pais||t.Nome||"Desconhecido",consumerGoods:e,stabilityEffect:o,analysis:{satisfactionLevel:this.getSatisfactionLevel(e.level),productionCapacity:e.production>e.demand?"Excedente":"Deficitário",economicImpact:o.stabilityEffect>0?"Positivo":o.stabilityEffect<0?"Negativo":"Neutro"}}}static getSatisfactionLevel(t){return t>=85?"Excelente":t>=70?"Bom":t>=50?"Adequado":t>=30?"Ruim":t>=15?"Muito Ruim":"Crítico"}}export{T as C};
