class w{constructor(){this.createModalContainer()}createModalContainer(){if(document.getElementById("unified-modal-container"))return;const t=document.createElement("div");t.id="unified-modal-container",t.innerHTML=`
            <div id="message-modal" class="fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm hidden" role="dialog" aria-modal="true">
                <div class="w-full max-w-md rounded-2xl bg-bg-soft border border-bg-ring/70 p-6">
                    <h2 id="modal-title" class="text-xl font-bold text-slate-100 mb-4"></h2>
                    <p id="modal-text" class="text-sm text-slate-300 mb-6"></p>
                    <div class="flex gap-3 justify-end">
                        <button id="modal-cancel-btn" class="px-4 py-2 rounded-xl border border-bg-ring/70 text-slate-300 hover:bg-white/5 transition-all" aria-label="Cancelar">Cancelar</button>
                        <button id="modal-ok-btn" class="px-4 py-2 rounded-xl bg-brand-500 text-slate-950 font-semibold hover:bg-brand-400 transition-all" aria-label="Confirmar">OK</button>
                    </div>
                </div>
            </div>`,document.body.appendChild(t)}show(t,e,n=!1){const r=document.getElementById("message-modal"),s=document.getElementById("modal-title"),i=document.getElementById("modal-text"),u=document.getElementById("modal-cancel-btn"),c=document.getElementById("modal-ok-btn");return!r||!s||!i||!u||!c?(console.error("Elementos do modal n√£o encontrados"),Promise.resolve(!1)):(s.textContent=t,i.textContent=e,u.style.display=n?"block":"none",r.classList.remove("hidden"),c.focus(),new Promise(l=>{const h=()=>{r.classList.add("hidden"),c.onclick=null,u.onclick=null,document.removeEventListener("keydown",m)},m=d=>{d.key==="Escape"&&(h(),l(!1))};c.onclick=()=>{h(),l(!0)},u.onclick=()=>{h(),l(!1)},document.addEventListener("keydown",m)}))}}const v=new w;function I(a,t){return v.show(a,t,!0)}class p{static formatCurrency(t,e="USD",n="pt-BR"){const r=this.parseNumber(t);return isNaN(r)?e==="USD"?"$0":"0":new Intl.NumberFormat(n,{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(r)}static parseNumber(t){return typeof t=="number"?t:parseFloat(String(t).replace(/[^-0-9.,]/g,"").replace(",","."))}static formatNumber(t,e="pt-BR"){const n=this.parseNumber(t);return isNaN(n)?"0":new Intl.NumberFormat(e).format(n)}static formatPercent(t,e=1){const n=this.parseNumber(t);return isNaN(n)?"0%":`${n.toFixed(e)}%`}static formatCurrencyCompact(t,e="USD",n="pt-BR"){const r=this.parseNumber(t);return isNaN(r)?e==="USD"?"$0":"0":r<1e12?new Intl.NumberFormat(n,{style:"currency",currency:e,minimumFractionDigits:0,maximumFractionDigits:0}).format(r):new Intl.NumberFormat(n,{style:"currency",currency:e,notation:"compact",compactDisplay:"short",minimumFractionDigits:0,maximumFractionDigits:1}).format(r)}}function D(a){return p.formatCurrency(a)}function L(a){return p.formatCurrencyCompact(a)}function O(a){return p.formatNumber(a)}class S{static isValidEmail(t){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)}static isStrongPassword(t){const n=/[A-Z]/.test(t),r=/[a-z]/.test(t),s=/\d/.test(t);return t.length>=8&&n&&r&&s}static sanitizeInput(t,e={}){const{allowHTML:n=!1,maxLength:r=null}=e;let s=String(t).trim();return n||(s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")),r&&s.length>r&&(s=s.substring(0,r)),s}static validateNumber(t,e=null,n=null){const r=p.parseNumber(t);return isNaN(r)?{valid:!1,error:"Valor deve ser um n√∫mero"}:e!==null&&r<e?{valid:!1,error:`Valor deve ser maior que ${e}`}:n!==null&&r>n?{valid:!1,error:`Valor deve ser menor que ${n}`}:{valid:!0,value:r}}}class C{constructor(){this.cache=new Map,this.timestamps=new Map}set(t,e,n=3e5){this.cache.set(t,e),this.timestamps.set(t,Date.now()+n)}get(t){const e=this.timestamps.get(t);return!e||Date.now()>e?(this.cache.delete(t),this.timestamps.delete(t),null):this.cache.get(t)}has(t){return this.get(t)!==null}clear(){this.cache.clear(),this.timestamps.clear()}async getOrFetch(t,e,n=3e5){let r=this.get(t);if(r===null)try{r=await e(),this.set(t,r,n)}catch(s){throw console.error(`Erro ao buscar dados para cache ${t}:`,s),s}return r}}class B{static levels={ERROR:0,WARN:1,INFO:2,DEBUG:3};static currentLevel=this.levels.INFO;static log(t,e,...n){if(t>this.currentLevel)return;const r=new Date().toISOString(),i=["ERROR","WARN","INFO","DEBUG"][t],u={timestamp:r,level:i,message:e,data:n};console.log(`${["üî¥","üü°","üîµ","üü£"][t]} [${r}] ${i}: ${e}`,...n);try{const l=JSON.parse(localStorage.getItem("war1954_logs")||"[]");l.push(u),l.length>100&&l.splice(0,50),localStorage.setItem("war1954_logs",JSON.stringify(l))}catch(l){console.error("Failed to store log:",l)}}static error(t,...e){this.log(this.levels.ERROR,t,...e)}static warn(t,...e){this.log(this.levels.WARN,t,...e)}static info(t,...e){this.log(this.levels.INFO,t,...e)}static debug(t,...e){this.log(this.levels.DEBUG,t,...e)}static getLogs(){try{return JSON.parse(localStorage.getItem("war1954_logs")||"[]")}catch{return[]}}static clearLogs(){localStorage.removeItem("war1954_logs")}}const M=new C;class x{static animateCounter(t,e,n={}){const{duration:r=1e3,locale:s="pt-BR",onComplete:i=null,easing:u="easeOutQuart"}=n,c=typeof t=="string"?document.getElementById(t):t;if(!c){console.warn(`Elemento n√£o encontrado: ${t}`);return}const l=parseInt(c.textContent.replace(/,/g,""))||0,h=e-l;if(h===0){i?.();return}const m=Date.now(),d={linear:o=>o,easeOutQuart:o=>1-Math.pow(1-o,4),easeInOutCubic:o=>o<.5?4*o*o*o:(o-1)*(2*o-2)*(2*o-2)+1},f=d[u]||d.easeOutQuart,g=()=>{const o=Date.now()-m,b=Math.min(o/r,1),y=f(b),N=l+h*y;c.textContent=Math.round(N).toLocaleString(s),b<1?requestAnimationFrame(g):(c.textContent=Math.round(e).toLocaleString(s),i?.())};requestAnimationFrame(g)}static debounce(t,e,n=!1){let r;return function(...i){const u=()=>{r=null,n||t.apply(this,i)},c=n&&!r;clearTimeout(r),r=setTimeout(u,e),c&&t.apply(this,i)}}static throttle(t,e){let n;return function(...r){n||(t.apply(this,r),n=!0,setTimeout(()=>n=!1,e))}}static lazyLoadImages(t="img[data-src]"){const e=document.querySelectorAll(t),n=new IntersectionObserver(r=>{r.forEach(s=>{if(s.isIntersecting){const i=s.target;i.src=i.dataset.src,i.classList.remove("lazy-load"),n.unobserve(i)}})});e.forEach(r=>n.observe(r))}}function R(a,t){x.animateCounter(a,t)}try{window.DOMUtils=x}catch{}class E{constructor(){this.notifications=new Set,this.maxNotifications=5}show(t,e,n={}){const{duration:r=4e3,closable:s=!0,position:i="top-right",persistent:u=!1}=n,c={success:"bg-emerald-500/10 border-emerald-500/20 text-emerald-400",error:"bg-red-500/10 border-red-500/20 text-red-400",warning:"bg-yellow-500/10 border-yellow-500/20 text-yellow-400",info:"bg-blue-500/10 border-blue-500/20 text-blue-400"},l={success:"‚úì",error:"‚úï",warning:"‚ö†",info:"‚Ñπ"},h={"top-right":"top-4 right-4","top-left":"top-4 left-4","bottom-right":"bottom-4 right-4","bottom-left":"bottom-4 left-4"},m=document.createElement("div");m.className=`fixed ${h[i]} z-50 px-4 py-3 rounded-xl border ${c[t]} animate-slide-up shadow-lg max-w-md`,m.setAttribute("role","alert"),m.setAttribute("aria-live","polite");const d=document.createElement("div");d.className="flex items-start gap-2";const f=document.createElement("span");f.className="text-lg flex-shrink-0",f.textContent=l[t]||l.info;const g=document.createElement("span");if(g.className="flex-1 text-sm",g.textContent=e,d.appendChild(f),d.appendChild(g),s){const o=document.createElement("button");o.className="ml-2 flex-shrink-0 opacity-70 hover:opacity-100 transition-opacity",o.innerHTML="‚úï",o.setAttribute("aria-label","Fechar notifica√ß√£o"),o.onclick=()=>this.remove(m),d.appendChild(o)}if(m.appendChild(d),this.notifications.size>=this.maxNotifications){const o=Array.from(this.notifications)[0];this.remove(o)}return this.notifications.add(m),document.body.appendChild(m),!u&&r>0&&setTimeout(()=>this.remove(m),r),m}remove(t){!t||!this.notifications.has(t)||(t.style.transform="translateX(100%)",t.style.opacity="0",t.style.transition="all 0.3s ease",setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),this.notifications.delete(t)},300))}clear(){Array.from(this.notifications).forEach(t=>{this.remove(t)})}}const F=new E;function $(a,t,e){return F.show(a,t,e)}export{p as F,B as L,S as V,I as a,O as b,L as c,R as d,D as f,M as g,$ as s};
