<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Economic Calculations Tests</title>
  <style>body{font-family:system-ui,Segoe UI,Roboto,Arial;background:#0b1220;color:#dbeafe;padding:20px} .pass{color:#10b981} .fail{color:#ef4444}</style>
</head>
<body>
  <h2>Economic Calculations - Quick Tests</h2>
  <div id="results"></div>

  <script type="module">
    import Econ from './js/systems/economicCalculations.js';

    const results = document.getElementById('results');
    function record(name, ok, details='') {
      const div = document.createElement('div');
      div.innerHTML = `<strong>${name}:</strong> <span class="${ok? 'pass':'fail'}">${ok? 'PASS':'FAIL'}</span> ${details}`;
      results.appendChild(div);
      console.log(name, ok, details);
    }

    try {
      // Test 1: resource consumption
      const a1 = Econ.computeIndustryResourceConsumption(10, {});
      record('computeIndustryResourceConsumption(10)', a1 === 2, `got=${a1} expected=2`);

      // Test 2: energy penalty
      const p = Econ.computeEnergyPenalty(50, 100);
      const expectedP = 1 - ((100-50)/100) * 0.6; // 0.7
      const close = Math.abs(p - expectedP) < 1e-6;
      record('computeEnergyPenalty(50,100)', close, `got=${p} expected=${expectedP}`);

      // Test 3: consumer goods index
      const idx = Econ.computeConsumerGoodsIndex({ IndustrialEfficiency: 50 }, { Graos:100, Combustivel:100, EnergiaDisponivel:0 });
      record('computeConsumerGoodsIndex(...)', idx === 85, `got=${idx} expected=85`);

    } catch (e) {
      record('exception', false, e.message);
      console.error(e);
    }
  </script>
</body>
</html>
